sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{submit:async function(e){debugger;var t=e.mParameters.value;var a=e.getSource().getParent().mAggregations.cells[0].mProperties.text;var r=e.getSource().getParent().mAggregations.cells[4].mProperties.text;var g=e.getSource().getParent().mAggregations.cells[6].mProperties.text;var s=e.getSource().getParent().mAggregations.cells[7].mProperties.text;let n=sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSubSection::LineItems--input-a").mProperties.value;let o="fm2";var i=this.getModel().bindContext(`/${o}(...)`);i.setParameter("poNum",n);i.setParameter("itemId",a);i.setParameter("quantity",t);i.setParameter("unitPrice",r);i.setParameter("sgst_value",g);i.setParameter("cgst_value",s);await i.execute();debugger;sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSubSection::Addediteminfo--table").mBindingInfos.items.binding.refresh();var m=0;var c=0;var d=0;let l=e.oSource.oParent.oParent.mAggregations.items;for(let e=0;e<l.length;e++){debugger;var u=parseFloat(l[e].mAggregations.cells[10].mProperties.text);m=parseFloat(m)+u;var p=parseFloat(l[e].mAggregations.cells[6].mProperties.text);var P=parseFloat(l[e].mAggregations.cells[7].mProperties.text);var A=JSON.stringify(u*p/100);var v=JSON.stringify(u*P/100);let t="cgst";var i=this.getModel().bindContext(`/${t}(...)`);i.setParameter("poNum",n);i.setParameter("itemId",l[e].mAggregations.cells[0].mProperties.text);i.setParameter("cgst",A);i.setParameter("sgst",v);await i.execute();var b=parseFloat(l[e].mAggregations.cells[9].mProperties.text);c=parseFloat(c)+b;var f=parseFloat(l[e].mAggregations.cells[8].mProperties.text);d=parseFloat(d)+f}sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSubSection::Addediteminfo--table").mBindingInfos.items.binding.refresh();sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSection::Totals-innerGrid").oParent.mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].oParent.mAggregations.content[0].mAggregations.content.mAggregations.items[0].mAggregations.items[1].mAggregations.items[0].setValue(m);sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSection::Totals-innerGrid").oParent.mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].oParent.mAggregations.content[0].mAggregations.content.mAggregations.items[1].mAggregations.items[1].mAggregations.items[0].setValue(d);sap.ui.getCore().byId("advancedpayment::poheaderObjectPage--fe::CustomSection::Totals-innerGrid").oParent.mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].oParent.mAggregations.content[0].mAggregations.content.mAggregations.items[2].mAggregations.items[1].mAggregations.items[0].setValue(c)}}});